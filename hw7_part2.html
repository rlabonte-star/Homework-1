<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="description" content="assignment 7 style manipulation and cookies in JavaScript course at CSM">
<title>Homework 7 Part 2</title>
<link rel="stylesheet" href="hw1.css">
<style>
  form {
    max-width: 600px;
    margin: 20px auto;
    text-align: left;
    padding: 20px;
    border: 1px solid #ccc;
  }
  .form-group { margin-bottom: 15px; }
  label { display: block; margin-bottom: 5px; font-weight: bold; }
  input[type="text"] { width: 100%; padding: 8px; box-sizing: border-box; }
  button { margin: 10px 0; padding: 10px 20px; cursor: pointer; }
  
  #welcomeMsg {
    display: none; 
    max-width: 600px;
    margin: 20px auto;
    padding: 20px;
    border: 1px solid green;
    background-color: #e6ffe6;
  }
</style>
</head>
<body onload="checkCookie()">

  <h1>Homework 7 Part 2</h1>
  <p><a href="hw7.html">Back to Homework 7</a></p>

  <form id="userForm">
    <div class="form-group">
      <p>Please enter your information</p>
      <label for="nameInput">Full Name:</label>
      <input type="text" id="nameInput" name="nameInput">
    </div>

    <div class="form-group">
      <label for="usernameInput">Username:</label>
      <input type="text" id="usernameInput" name="usernameInput">
    </div>

    <button type="button" onclick="registerUser()">Log In</button>
  </form>

  <div id="welcomeMsg"></div>

  <script>
    function setCookie(cname, cvalue) {
      document.cookie = cname + "=" + cvalue + ";path=/";
    }

    function getCookie(cname) {
      let name = cname + "=";
      let decodedCookie = decodeURIComponent(document.cookie);
      let ca = decodedCookie.split(';');
      for(let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    function checkCookie() {
      let user = getCookie("fullName");
      let username = getCookie("userName");

      if (user != "") {
        document.getElementById("userForm").style.display = "none";
        document.getElementById("welcomeMsg").style.display = "block";
        document.getElementById("welcomeMsg").innerHTML = "Welcome Back " + user;
      }
    }

    function registerUser() {
      const name = document.getElementById("nameInput").value;
      const user = document.getElementById("usernameInput").value;

      if (name != "" && user != "") {
        setCookie("fullName", name);
        setCookie("userName", user);
        history.go(0);
      } else {
        alert("Please fill out both fields.");
      }
    }
  </script>
</body>
</html>