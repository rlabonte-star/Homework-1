<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="description" content="assignment 3 part 1 working with JavaScript functions in JavaScript course at CSM">
<title>JavaScript course at CSM</title>
<link rel="stylesheet" href="hw1.css">
</head>
<body>
  <h1>Homework 3 Part 2</h1>
  <form id="salesForm">
    <table>
      <tr>
        <th>Item</th>
        <th>Price</th>
        <th>Qty Sold</th>
        <th>Total</th>
      </tr>
      <tr>
        <td>Item 1</td>
        <td>$20.99</td>
        <td><input type="number" id="qty1" min="0"></td>
        <td><input type="text" id="total1" readonly></td>
      </tr>
      <tr>
        <td>Item 2</td>
        <td>$12.75</td>
        <td><input type="number" id="qty2" min="0"></td>
        <td><input type="text" id="total2" readonly></td>
      </tr>
      <tr>
        <td>Item 3</td>
        <td>$9.95</td>
        <td><input type="number" id="qty3" min="0"></td>
        <td><input type="text" id="total3" readonly></td>
      </tr>
      <tr>
        <td>Item 4</td>
        <td>$35.89</td>
        <td><input type="number" id="qty4" min="0"></td>
        <td><input type="text" id="total4" readonly></td>
      </tr>
      <tr>
        <td colspan="3"><strong>Total Amount Sold</strong></td>
        <td><input type="text" id="totalSold" readonly></td>
      </tr>
      <tr>
        <td colspan="3"><strong>Total Weekly Earnings</strong></td>
        <td><input type="text" id="earnings" readonly></td>
      </tr>
    </table>
    <button type="button" onclick="calculateSales()">Calculate</button>
    <button type="reset">Clear</button>
  </form>
  <p id="error"></p>
  <p>
	<a href="hw3.html">Back to Homework 3</a>
    <a href="hw3_part1.html">Go to Part 1</a>
  </p>

  <script>
    function calculateSales() {
      const prices = [20.99, 12.75, 9.95, 35.89];
      const qty = [];
      const totals = [];
      let totalSold = 0;
      let errorMsg = "";
      
      for (let i = 0; i < 4; i++) {
        const val = parseInt(document.getElementById("qty" + (i + 1)).value);
        if (isNaN(val) || val < 0) {
          errorMsg = "Error: Please enter valid non-negative numbers for all quantities.";
          break;
        }
        qty[i] = val;
        totals[i] = (qty[i] * prices[i]).toFixed(2);
        totalSold += parseFloat(totals[i]);
      }

      if (errorMsg !== "") {
        document.getElementById("error").textContent = errorMsg;
        clearOutputs();
        return;
      }

      for (let i = 0; i < 4; i++) {
        document.getElementById("total" + (i + 1)).value = totals[i];
      }

      document.getElementById("totalSold").value = totalSold.toFixed(2);
      const earnings = 250 + (0.09 * totalSold);
      document.getElementById("earnings").value = earnings.toFixed(2);
      document.getElementById("error").textContent = "";
    }

    function clearOutputs() {
      for (let i = 1; i <= 4; i++) {
        document.getElementById("total" + i).value = "";
      }
      document.getElementById("totalSold").value = "";
      document.getElementById("earnings").value = "";
    }
  </script>
</body>
</html>
